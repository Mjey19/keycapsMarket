import{u,j as e,r as p,a as f,b as g,c as m,B as h,d as b,o as j}from"./index-dvVcob7o.js";import{u as C,j as w}from"./api-instance-Bk9aryl-.js";function y({...r}){const s=u(),{price:i,title:c,id:t}=r;return e.jsxs("div",{onClick:()=>s(`/keycapsMarket/products/${t}`),className:"w-[320px] sm:w-full h-[293px] duration-200 border border-white/50 rounded-[15px] p-[15px] cursor-pointer hover:border-white ",children:[e.jsx("div",{className:"h-40 w-full bg-gray-200"}),e.jsxs("div",{className:"mt-[15px] flex flex-col gap-3",children:[e.jsx("p",{className:"text-[16px] h-10",children:c}),e.jsxs("span",{className:"text-[20px] font-medium",children:[i," ₽"]})]})]})}const v=r=>e.jsx("input",{...r}),N=({item:r,setFormState:s})=>{const i=p.useCallback((t,n,o,a)=>{s(l=>{const d={...l||{}};return n!==void 0&&o<=n&&n<=a&&d[t]!==n.toString()&&(d[t]=n.toString()),d})},[s]),c=p.useCallback((t,n,o)=>{s(a=>{const l={...a||{}};if(o)Array.isArray(l[t])?l[t]=[...l[t],n]:l[t]=[n];else if(Array.isArray(l[t])){const d=l[t].filter(x=>x!==n);d.length>0?l[t]=d:delete l[t]}return l})},[s]);return r.type==="checkbox"?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[24px]",children:r.name}),e.jsx("div",{className:"flex flex-col gap-[10px] mt-[10px]",children:r.inputs.map((t,n)=>e.jsx(k,{onChange:c,val:r.val,label:t.placeholder},n))})]}):e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[24px]",children:r.name}),e.jsx("div",{className:"flex justify-between items-center gap-[10px] mt-[10px]",children:r.inputs.map((t,n)=>e.jsx(v,{onChange:o=>{const a=Number(o.target.min),l=Number(o.target.max),d=Number(o.target.value);isNaN(d)||i(o.target.name,d,a,l)},min:200,max:4200,name:r.val[n],type:r.type,placeholder:t.placeholder,className:"w-1/2 h-10 border border-white/50 bg-transparent pl-3 text-white/50 rounded-[10px]"},n))})]})},k=({label:r,val:s,onChange:i})=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{name:s,onChange:c=>i(s,r,c.target.checked),type:"checkbox",className:"appearance-none w-6 h-6 border border-white rounded-[5px] checked:bg-primary checked:border-primary cursor-pointer transition-colors duration-200"}),e.jsx("span",{className:"text-white text-[20px]",children:r})]});function S(r){const{search:s}=f(),c=new URLSearchParams(s).toString(),t=c?`/catalog?category=${r}&${c}`:`/catalog?category=${r}`;return C({queryKey:["catalog",t],queryFn:({signal:n})=>w(t,{method:"GET",signal:n})})}function M(){const{category:r}=g(),{data:s,isLoading:i}=S(r);return i?e.jsx("div",{className:"w-full text-center text-[32px] font-bold ",children:"Loading..."}):s===void 0&&!s?e.jsx("div",{className:"sm:w-full text-[32px] font-bold text-center",children:"Товаров по данной категории нет"}):e.jsx("div",{className:"w-full grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:(s==null?void 0:s.length)&&s.map(c=>e.jsx(y,{...c},c.id))})}const P=[{name:"Цена",inputs:[{placeholder:"от 200"},{placeholder:"до 4200"}],type:"number",val:["price_gte","price_lte"]},{name:"Размер набора",inputs:[{placeholder:"Маленький набор"},{placeholder:"На всю клавиатуру"}],type:"checkbox",val:"setSize"},{name:"Тип подключения",inputs:[{placeholder:"Беспроводной"},{placeholder:"Проводной"}],type:"checkbox",val:"connectionType"},{name:"Тип подсветки",inputs:[{placeholder:"Без подсветки"},{placeholder:"С подсветкой"}],type:"checkbox",val:"lighting"}];function A(){const{isOpen:r}=m(o=>o.form),s=u();console.log(r);const[i,c]=p.useState({}),t=p.useCallback(o=>{const a=new URLSearchParams;Object.keys(o).forEach(l=>{const d=o[l];Array.isArray(d)?d.forEach(x=>a.append(l,x)):a.set(l,d)}),s(`?${a.toString()}`)},[s]),n=o=>{o.preventDefault(),c({})};return p.useEffect(()=>{t(i)},[i,t]),e.jsxs("form",{className:`transition-all duration-300 
    ${r?"block w-56 opacity-100":"hidden w-0 opacity-0"} 
    lg:flex lg:flex-col lg:w-56 md:opacity-100 
    md:max-h-[1250px] flex flex-col gap-10 overflow-hidden`,children:[P.map((o,a)=>e.jsx(N,{setFormState:c,item:o},a)),e.jsx(h,{onClick:n,className:`w-full h-10 text-[20px] text-white\r
                  border border-white rounded-[15px] bg-transparent \r
                  transition-colors duration-200 \r
                  hover:bg-primary hover:text-black hover:border-none`,children:"Очистить фильтры"})]})}const H=["Подешевле","Подороже","По скидке"];function $(){const r=b(),s=m(a=>a.form.isOpen),[i,c]=p.useState(!1),[t,n]=p.useState(""),o=a=>{n(a),c(!1)};return e.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[e.jsx("h2",{className:"font-bold text-[32px]",children:"Клавиатуры"}),e.jsxs("div",{className:"relative flex items-center gap-5 group mt-5",children:[e.jsxs(h,{onClick:()=>r(j()),className:`${s&&" bg-primary border-primary"} duration-200 w-40 h-[50px] flex items-center justify-center font-bold gap-2 lg:hidden border border-white rounded-[10px] group`,children:[e.jsx("svg",{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 9.49952H6.64676M2.63935 9.49952H1M2.63935 9.49952C2.63935 8.94026 2.85041 8.40391 3.22609 8.00846C3.60177 7.613 4.1113 7.39084 4.64259 7.39084C5.17389 7.39084 5.68342 7.613 6.0591 8.00846C6.43478 8.40391 6.64584 8.94026 6.64584 9.49952C6.64584 10.0588 6.43478 10.5951 6.0591 10.9906C5.68342 11.386 5.17389 11.6082 4.64259 11.6082C4.1113 11.6082 3.60177 11.386 3.22609 10.9906C2.85041 10.5951 2.63935 10.0588 2.63935 9.49952ZM18 15.8904H12.7181M12.7181 15.8904C12.7181 16.4497 12.5065 16.9867 12.1307 17.3822C11.755 17.7778 11.2453 18 10.7139 18C10.1826 18 9.67307 17.7769 9.29739 17.3814C8.9217 16.986 8.71065 16.4496 8.71065 15.8904M12.7181 15.8904C12.7181 15.331 12.5065 14.795 12.1307 14.3994C11.755 14.0039 11.2453 13.7817 10.7139 13.7817C10.1826 13.7817 9.67307 14.0038 9.29739 14.3993C8.9217 14.7947 8.71065 15.3311 8.71065 15.8904M8.71065 15.8904H1M18 3.10868H15.1468M11.1394 3.10868H1M11.1394 3.10868C11.1394 2.54942 11.3504 2.01307 11.7261 1.61762C12.1018 1.22216 12.6113 1 13.1426 1C13.4057 1 13.6662 1.05454 13.9092 1.16051C14.1522 1.26648 14.3731 1.42181 14.5591 1.61762C14.7451 1.81343 14.8927 2.04588 14.9934 2.30172C15.094 2.55756 15.1458 2.83176 15.1458 3.10868C15.1458 3.38559 15.094 3.6598 14.9934 3.91563C14.8927 4.17147 14.7451 4.40393 14.5591 4.59974C14.3731 4.79555 14.1522 4.95087 13.9092 5.05684C13.6662 5.16281 13.4057 5.21735 13.1426 5.21735C12.6113 5.21735 12.1018 4.99519 11.7261 4.59974C11.3504 4.20428 11.1394 3.66793 11.1394 3.10868Z",stroke:"white","stroke-miterlimit":"10","stroke-linecap":"round"})}),"Фильтры"]}),e.jsxs("div",{className:"relative md:w-[200px]",children:[e.jsxs("button",{onClick:()=>c(!i),className:"w-full h-[50px] bg-transparent text-white text-[20px] font-medium rounded-[10px] p-3 flex items-center justify-between border border-white backdrop-blur-sm transition-all duration-200",children:[t||"Выберите...",e.jsx("span",{className:"ml-2",children:"▼"})]}),i&&e.jsx("ul",{className:"absolute z-10 mt-2 w-full bg-background backdrop-blur-sm rounded-[10px] overflow-hidden border border-white",children:H.map(a=>e.jsx("li",{onClick:()=>o(a),className:"text-white text-[18px] font-medium px-3 py-2 cursor-pointer hover:bg-white/40 transition",children:a===t?e.jsx("div",{children:a}):a},a))})]})]})]})}function L(){return e.jsx("div",{className:"mx-[5%] md:mx-[9%] mt-[120px] mb-10",children:e.jsxs("div",{children:[e.jsx($,{}),e.jsxs("div",{className:"flex justify-center md:justify-between items-start gap-10 mt-[90px]",children:[e.jsx(A,{}),e.jsx("div",{className:"flex-1",children:e.jsx(M,{})})]})]})})}export{L as default};
